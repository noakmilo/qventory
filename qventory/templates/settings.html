{% extends "base_new.html" %}
{% block title %}Settings – Qventory{% endblock %}

{% block breadcrumb %}
<nav class="breadcrumb">
  <a href="{{ url_for('main.dashboard') }}">Dashboard</a>
  <span class="breadcrumb-separator">/</span>
  <span class="breadcrumb-current">Settings</span>
</nav>
{% endblock %}

{% block content %}

<!-- eBay Integration Section -->
<div class="card" style="margin-bottom:20px">
  <h2><i class="fab fa-ebay" style="color:#E53238"></i> eBay Integration</h2>

  {% if ebay_connected %}
    <!-- Connected State -->
    <div style="background:rgba(16,185,129,0.1);border:1px solid rgba(16,185,129,0.3);border-radius:8px;padding:16px;margin-bottom:16px">
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px">
        <i class="fas fa-check-circle" style="color:#10b981;font-size:24px"></i>
        <div>
          <div style="font-weight:600;color:#10b981">Connected to eBay</div>
          <div style="font-size:13px;color:var(--sub)">Account: {{ ebay_username }}</div>
        </div>
      </div>
      <div style="font-size:12px;color:var(--sub);margin-top:12px">
        <div>✓ Import inventory from eBay</div>
        <div>✓ Sync location to Custom SKU</div>
        <div>✓ Auto-sync sales and orders</div>
      </div>
    </div>

    <div style="display:flex;gap:8px">
      <form method="post" action="{{ url_for('ebay_auth.refresh_token') }}" style="display:inline">
        <button type="submit" class="btn" style="background:rgba(96,165,250,0.1);border-color:rgba(96,165,250,0.3);color:#60a5fa">
          <i class="fas fa-sync-alt"></i> Refresh Token
        </button>
      </form>
      <form method="post" action="{{ url_for('ebay_auth.disconnect') }}" style="display:inline"
            onsubmit="return confirm('Are you sure you want to disconnect your eBay account?')">
        <button type="submit" class="btn" style="background:rgba(239,68,68,0.1);border-color:rgba(239,68,68,0.3);color:#ef4444">
          <i class="fas fa-unlink"></i> Disconnect
        </button>
      </form>
    </div>
  {% else %}
    <!-- Not Connected State -->
    <div style="background:rgba(156,163,175,0.1);border:1px solid rgba(156,163,175,0.3);border-radius:8px;padding:16px;margin-bottom:16px">
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px">
        <i class="fas fa-link-slash" style="color:#9ca3af;font-size:24px"></i>
        <div>
          <div style="font-weight:600;color:var(--text)">Not Connected</div>
          <div style="font-size:13px;color:var(--sub)">Connect your eBay seller account to unlock:</div>
        </div>
      </div>
      <div style="font-size:12px;color:var(--sub);margin-top:12px;margin-left:36px">
        <div>• Import all your eBay listings to Qventory</div>
        <div>• Sync inventory locations to eBay Custom SKU</div>
        <div>• Auto-import sales and order data</div>
        <div>• Real-time analytics from your eBay store</div>
      </div>
    </div>

    <a href="{{ url_for('ebay_auth.connect') }}"
       class="btn btn-primary"
       style="background:#60a5fa;border-color:#60a5fa"
       onclick="event.preventDefault(); window.location.href = '{{ url_for('ebay_auth.connect') }}';">
      <i class="fab fa-ebay"></i> Connect eBay Account
    </a>
  {% endif %}
    </div>

<div class="settings-grid">
  <a class="settings-card" href="{{ url_for('main.settings_labels') }}">
    <div class="settings-card__icon"><i class="fas fa-layer-group"></i></div>
    <div>
      <h3>Location Labels</h3>
      <p>Configure A/B/S/C hierarchy and labels.</p>
    </div>
  </a>
  <a class="settings-card" href="{{ url_for('main.settings_link_bio') }}">
    <div class="settings-card__icon"><i class="fas fa-link"></i></div>
    <div>
      <h3>Link In Bio</h3>
      <p>Customize your public storefront link.</p>
    </div>
  </a>
  <a class="settings-card" href="{{ url_for('main.settings_theme') }}">
    <div class="settings-card__icon"><i class="fas fa-palette"></i></div>
    <div>
      <h3>Theme</h3>
      <p>Switch between dark and light modes.</p>
    </div>
  </a>
  <a class="settings-card" href="{{ url_for('main.settings_subscription') }}">
    <div class="settings-card__icon"><i class="fas fa-receipt"></i></div>
    <div>
      <h3>Subscription</h3>
      <p>Manage plan, billing, and renewals.</p>
    </div>
  </a>
  <a class="settings-card" href="{{ url_for('main.settings_support') }}">
    <div class="settings-card__icon"><i class="fas fa-life-ring"></i></div>
    <div>
      <h3>Support</h3>
      <p>Get help and join the community.</p>
    </div>
  </a>
</div>

<style>
  .settings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 16px;
  }
  .settings-card {
    display: flex;
    gap: 14px;
    padding: 16px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,0.08);
    background: rgba(15,23,42,0.6);
    text-decoration: none;
    color: var(--text);
    transition: transform 0.15s ease, border-color 0.15s ease;
  }
  .settings-card:hover {
    transform: translateY(-2px);
    border-color: rgba(96,165,250,0.45);
  }
  .settings-card__icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    background: rgba(96,165,250,0.12);
    color: #60a5fa;
    display: grid;
    place-items: center;
    font-size: 18px;
    flex: 0 0 auto;
  }
  .settings-card h3 {
    margin: 0 0 4px 0;
    font-size: 16px;
  }
  .settings-card p {
    margin: 0;
    color: var(--sub);
    font-size: 13px;
  }
</style>
{% endblock %}
