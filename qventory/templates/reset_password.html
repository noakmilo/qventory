{% extends "base.html" %}
{% block title %}Reset Password – Qventory{% endblock %}
{% block content %}
<div class="card" style="max-width:520px;margin:0 auto">
  <div style="text-align:center;margin-bottom:24px;">
    <div style="display:inline-block;width:64px;height:64px;background:linear-gradient(135deg, #f59e0b 0%, #d97706 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:16px;">
      <i class="fas fa-lock-open" style="font-size:28px;color:white;"></i>
    </div>
    <h2 style="margin:0 0 8px 0;">Reset your password</h2>
    <p style="color:var(--text-secondary);margin:0;">Enter the code sent to:</p>
    <p style="font-weight:600;color:var(--text);margin:4px 0 0 0;">{{ email }}</p>
  </div>

  <form method="post" class="grid cols-1">
    <input type="hidden" name="email" value="{{ email }}">

    <div>
      <label>Verification Code</label>
      <input
        class="input"
        type="text"
        name="code"
        placeholder="000000"
        maxlength="6"
        pattern="[0-9]{6}"
        autocomplete="one-time-code"
        inputmode="numeric"
        style="font-size:24px;letter-spacing:8px;text-align:center;font-family:monospace;"
        required
        autofocus>
      <p class="tag" style="margin-top:8px;">
        <i class="fas fa-clock"></i> Code expires in 15 minutes
      </p>
    </div>

    <div>
      <label>New Password</label>
      <input class="input" type="password" name="new_password" minlength="6" placeholder="••••••••" required>
    </div>

    <div>
      <label>Confirm New Password</label>
      <input class="input" type="password" name="confirm_password" minlength="6" placeholder="••••••••" required>
    </div>

    <div>
      <button class="btn submitbtn" type="submit">Reset Password</button>
    </div>
  </form>

  <div style="margin-top:24px;padding-top:24px;border-top:1px solid var(--border);text-align:center;">
    <p style="color:var(--text-secondary);font-size:14px;margin-bottom:12px;">Didn't receive the code?</p>
    <form method="post" action="{{ url_for('auth.resend_reset_code') }}" style="display:inline;">
      <input type="hidden" name="email" value="{{ email }}">
      <button class="btn" type="submit" style="background:var(--surface-secondary);">
        <i class="fas fa-redo"></i> Resend Code
      </button>
    </form>
  </div>

  <div style="margin-top:16px;text-align:center;">
    <a href="{{ url_for('auth.login') }}" style="color:var(--text-secondary);font-size:14px;">
      <i class="fas fa-arrow-left"></i> Back to Sign In
    </a>
  </div>
</div>

<style>
/* Remove spinner arrows from number input */
input[type="text"][inputmode="numeric"]::-webkit-outer-spin-button,
input[type="text"][inputmode="numeric"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
</style>
{% endblock %}
